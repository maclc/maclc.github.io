import{M as e,o as t,c as o,w as s,a as i,n as r,f as a,g as n,d as u,t as l,k as g,j as h,e as d,N as f,m as c,C as p,B as m,s as y,p as S,O as T}from"./index-5a168bd5.js";const x=(e,t)=>{const o=e.__vccOpts||e;for(const[s,i]of t)o[s]=i;return o};function F(t,o){return e(t)?o:t}const C=x({name:"gui-refresh",props:{refreshText:{type:Array,default:function(){return["继续下拉刷新","松开手指开始刷新","数据刷新中","数据已刷新"]}},customClass:{type:Array,default:function(){return[["gui-color-gray"],["gui-color-gray"],["gui-primary-text"],["gui-color-green"]]}},refreshFontSize:{type:Number,default:28},triggerHeight:{type:Number,default:50}},data:()=>({reScrollTop:0,refreshHeight:0,refreshY:0,refreshStatus:0,refreshTimer:0}),methods:{touchstart:function(e){this.reScrollTop>10||(this.refreshY=e.changedTouches[0].pageY)},touchmove:function(e){if(this.refreshStatus>=1)return null;if(!(this.reScrollTop>10)){var t=e.changedTouches[0].pageY-this.refreshY;(t/=2)>=this.triggerHeight&&(t=this.triggerHeight,this.refreshStatus=1),t>15&&(this.refreshHeight=t)}},touchend:function(e){if(!(this.reScrollTop>10))return this.refreshStatus<1?this.resetFresh():void(1==this.refreshStatus&&(this.refreshStatus=2,this.$emit("reload")))},scroll:function(e){this.reScrollTop=e.detail.scrollTop},endReload:function(){this.refreshStatus=3,setTimeout((()=>{this.resetFresh()}),1e3)},resetFresh:function(){return this.refreshHeight=0,this.refreshStatus=0,null},rotate360:function(){var e=this.$refs.loadingIcon;animation.transition(e,{styles:{transform:"rotate(7200deg)",transformOrigin:"center"},duration:2e4,timingFunction:"linear",needLayout:!1,delay:0})}},emits:["reload"]},[["render",function(e,d,f,c,p,m){const y=g,S=h;return t(),o(S,{class:"gui-page-refresh gui-flex gui-column gui-justify-content-center",style:r({height:p.refreshHeight+"px"})},{default:s((()=>[i(S,{style:r({height:f.refreshFontSize+"rpx"}),class:"gui-flex gui-row gui-justify-content-center gui-align-items-center"},{default:s((()=>[0==p.refreshStatus||1==p.refreshStatus?(t(),o(y,{key:0,class:a(["gui-icons gui-block",f.customClass[p.refreshStatus]]),style:r({fontSize:f.refreshFontSize+"rpx",width:f.refreshFontSize+"rpx",height:f.refreshFontSize+"rpx",lineHeight:f.refreshFontSize+"rpx"})},{default:s((()=>[n("")])),_:1},8,["class","style"])):u("",!0),2==p.refreshStatus?(t(),o(y,{key:1,ref:"loadingIcon",class:a(["gui-icons gui-block gui-text-center gui-rotate360",f.customClass[p.refreshStatus]]),style:r({fontSize:f.refreshFontSize+"rpx",width:f.refreshFontSize+"rpx",height:f.refreshFontSize+"rpx",lineHeight:f.refreshFontSize+"rpx"})},{default:s((()=>[n("")])),_:1},8,["class","style"])):u("",!0),3==p.refreshStatus?(t(),o(y,{key:2,class:a(["gui-icons",f.customClass[p.refreshStatus]]),style:r({fontSize:f.refreshFontSize+"rpx",width:f.refreshFontSize+"rpx",height:f.refreshFontSize+"rpx",lineHeight:f.refreshFontSize+"rpx"})},{default:s((()=>[n("")])),_:1},8,["class","style"])):u("",!0),i(y,{style:r([{"margin-left":"12rpx"},{fontSize:f.refreshFontSize+"rpx"}]),class:a(["gui-page-refresh-text gui-block",f.customClass[p.refreshStatus]])},{default:s((()=>[n(l(f.refreshText[p.refreshStatus]),1)])),_:1},8,["class","style"])])),_:1},8,["style"])])),_:1},8,["style"])}],["__scopeId","data-v-e3c03afa"]]);const z=x({name:"gui-loadmore",props:{loadMoreText:{type:Array,default:function(){return["","数据加载中","已加载全部数据","暂无数据"]}},customClass:{type:Array,default:function(){return["gui-color-gray"]}},loadMoreFontSize:{type:String,default:"26rpx"},status:{type:Number,default:0}},data:()=>({loadMoreStatus:0,hidden:!1}),created:function(){this.loadMoreStatus=this.status,this.status},methods:{loading:function(){this.loadMoreStatus=1},stoploadmore:function(){this.loadMoreStatus=0},stopLoadmore:function(){this.loadMoreStatus=0},nomore:function(){this.loadMoreStatus=2},empty:function(){this.loadMoreStatus=3},hide:function(){this.hidden=!0},rotate360:function(){var e=this.$refs.loadingiconforloadmore;animation.transition(e,{styles:{transform:"rotate(7200deg)"},duration:2e4,timingFunction:"linear",needLayout:!1,delay:0})},tapme:function(){0==this.loadMoreStatus&&this.$emit("tapme")}},emits:["tapme"]},[["render",function(e,f,c,p,m,y){const S=g,T=h;return t(),o(T,{class:"gui-load-more gui-flex gui-row gui-align-items-center gui-justify-content-center",onClick:d(y.tapme,["stop","prevent"])},{default:s((()=>[0==m.loadMoreStatus?(t(),o(T,{key:0},{default:s((()=>[i(S,{class:"gui-block",style:r({height:c.loadMoreFontSize})},null,8,["style"])])),_:1})):u("",!0),1==m.loadMoreStatus?(t(),o(T,{key:1,class:"gui-load-more-icon",ref:"loadingiconforloadmore"},{default:s((()=>[i(S,{class:a([c.customClass,"gui-icons gui-rotate360 gui-block"]),style:r({fontSize:c.loadMoreFontSize})},{default:s((()=>[n("")])),_:1},8,["class","style"])])),_:1},512)):u("",!0),i(S,{class:a(["gui-block",c.customClass]),style:r({fontSize:c.loadMoreFontSize})},{default:s((()=>[n(l(c.loadMoreText[m.loadMoreStatus]),1)])),_:1},8,["class","style"])])),_:1},8,["onClick"])}],["__scopeId","data-v-0a5aca14"]]);const v=x({name:"gui-iphone-bottom",props:{height:{type:String,default:"60rpx"},isSwitchPage:{type:Boolean,default:!1},customClass:{type:Array,default:function(){return["gui-bg-transparent"]}}},data:()=>({need:!1}),created:function(){if(!this.isSwitchPage){var e=f();if(e.model){e.model=e.model.replace(" ",""),e.model=e.model.toLowerCase();var t=e.model.indexOf("iphonex");t>5&&(t=-1);var o=e.model.indexOf("iphone1");o>5&&(o=-1),-1==t&&-1==o||(this.need=!0)}}}},[["render",function(e,s,i,n,l,g){const d=h;return l.need?(t(),o(d,{key:0,style:r({height:i.height}),class:a(i.customClass)},null,8,["style","class"])):u("",!0)}]]);const H=x({name:"gui-page-loading",props:{},data:()=>({isLoading:!1,BindingXObjs:[null,null,null],AnimateObjs:[null,null,null],animateTimer:800,intervalID:null}),watch:{},methods:{stopfun:function(e){return e.stopPropagation(),null},open:function(){this.isLoading=!0},close:function(){setTimeout((()=>{this.isLoading=!1}),100)},getRefs:function(e,t,o){if(t>=50)return o(this.$refs[e]),!1;var s=this.$refs[e];s?o(s):(t++,setTimeout((()=>{this.getRefs(e,t,o)}),100))}}},[["render",function(e,r,a,n,l,g){const f=h;return l.isLoading?(t(),o(f,{key:0,class:"gui-page-loading gui-flex gui-nowrap gui-align-items-center gui-justify-content-center gui-page-loading-bg",onClick:d(g.stopfun,["stop"]),onTouchmove:d(g.stopfun,["stop","prevent"])},{default:s((()=>[i(f,{class:"gui-column"},{default:s((()=>[i(f,{class:"gui-page-loading-point gui-flex gui-rows gui-justify-content-center"},{default:s((()=>[i(f,{class:"gui-page-loading-points animate1 gui-page-loading-color"}),i(f,{class:"gui-page-loading-points animate2 gui-page-loading-color"}),i(f,{class:"gui-page-loading-points animate3 gui-page-loading-color"})])),_:1}),i(f,{class:"gui-row gui-justify-content-center"},{default:s((()=>[c(e.$slots,"default",{},void 0,!0)])),_:3})])),_:3})])),_:3},8,["onClick","onTouchmove"])):u("",!0)}],["__scopeId","data-v-17f65621"]]);const M=x({name:"gui-page",props:{fullPage:{type:Boolean,default:!1},customHeader:{type:Boolean,default:!1},headerClass:{type:Array,default:function(){return[]}},isHeaderSized:{type:Boolean,default:!0},statusBarClass:{type:Array,default:function(){return[]}},customFooter:{type:Boolean,default:!1},footerClass:{type:Array,default:function(){return[]}},footerSpaceClass:{type:Array,default:function(){return["gui-bg-gray","gui-dark-bg-level-2"]}},customFooterHeight:{type:Number,default:100},pendantClass:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isSwitchPage:{type:Boolean,default:!1},fixedTopClass:{type:Array,default:function(){return[]}},refresh:{type:Boolean,default:!1},refreshText:{type:Array,default:function(){return["继续下拉刷新","松开手指开始刷新","数据刷新中","数据已刷新"]}},refreshClasses:{type:Array,default:function(){return[["gui-color-gray"],["gui-color-gray"],["gui-primary-text"],["gui-color-green"]]}},refreshFontSize:{type:Number,default:26},loadmore:{type:Boolean,default:!1},loadMoreText:{type:Array,default:function(){return["","数据加载中","已加载全部数据","暂无数据"]}},loadMoreClass:{type:Array,default:function(){return["gui-color-gray"]}},loadMoreFontSize:{type:String,default:"26rpx"},loadMoreStatus:{type:Number,default:1},apiLoadingStatus:{type:Boolean,default:!1},reFreshTriggerHeight:{type:Number,default:50}},data:()=>({pageStatus:!1,footerHeight:50,statusBarHeight:44,headerHeight:44,headerTapNumber:0,fixedTop:0,loadMoreTimer:null,fixedTopMargin:0,scrollTop:0,srcollTimer:null,refreshing:!1,pullingdownVal:0,topTagID:"no"}),watch:{isLoading:function(e){e?this.pageLoadingOpen():this.pageLoadingClose()}},mounted:function(){this.customFooter&&(this.footerHeight=p(this.customFooterHeight)),this.isLoading&&this.pageLoadingOpen();try{var e=f();e.model&&(this.statusBarHeight=e.statusBarHeight)}catch(t){return null}this.customFooter&&setTimeout((()=>{this.getDomSize("guiPageFooter",(e=>{this.footerHeight=e.height}),0)}),200),this.customHeader?setTimeout((()=>{this.getDomSize("guiPageHeader",(e=>{this.headerHeight=e.height,this.$nextTick((()=>{this.pageStatus=!0}))}),0)}),200):this.pageStatus=!0,this.customHeader?setTimeout((()=>{this.getDomSize("guiPageHeader",(e=>{this.fixedTop=e.height}),0)}),200):this.fixedTop=44,setTimeout((()=>{this.getDomSize("guiPageFixedTop",(e=>{this.fixedTopMargin=e.height}),0)}),200)},methods:{onpullingdown:function(e){if(this.apiLoadingStatus)return!1;e.changedTouches=[{pageY:e.pullingDistance}],this.$refs.guiPageRefresh.touchmove(e)},onrefresh:function(){if(this.apiLoadingStatus)return!1;this.refreshing=!0,this.$refs.guiPageRefresh.refreshStatus=2,setTimeout((()=>{this.$refs.guiPageRefresh.rotate360()}),200),this.$emit("reload")},pageLoadingOpen:function(){this.getRefs("guipageloading",0,(e=>{e.open()}))},pageLoadingClose:function(){this.getRefs("guipageloading",0,(e=>{e.close()}))},touchstart:function(e){return!!this.refresh&&(!this.apiLoadingStatus&&void this.$refs.guiPageRefresh.touchstart(e))},touchmove:function(e){return!!this.refresh&&(!this.apiLoadingStatus&&void this.$refs.guiPageRefresh.touchmove(e))},touchend:function(e){return!!this.refresh&&(!this.apiLoadingStatus&&void this.$refs.guiPageRefresh.touchend(e))},scroll:function(e){null!=this.srcollTimer&&clearTimeout(this.srcollTimer),this.srcollTimer=setTimeout((()=>{this.$refs.guiPageRefresh.scroll(e),this.$emit("scroll",e),this.scrollTop=e.detail.scrollTop}),500)},toTop:function(){this.topTagID="guiPageBodyTopTag",setTimeout((()=>{this.topTagID="no"}),500)},endReload:function(){this.$refs.guiPageRefresh.endReload(),this.refreshing=!1},reload:function(){if(this.apiLoadingStatus)return!1;this.$emit("reload"),this.loadmore&&this.$refs.guipageloadmore.stoploadmore()},getDomSize:function(e,t,o){if(o||(o=1),o>=50)return t({width:0,height:0}),!1;m().in(this).select("#"+e).boundingClientRect().exec((s=>null==s[0]||null==s[0].height?(o+=1,void setTimeout((()=>{this.getDomSize(e,t,o)}),50)):void t(s[0])))},stopfun:function(e){return e.stopPropagation(),null},headerTap:function(){this.headerTapNumber++,this.headerTapNumber>=2?(this.$emit("gotoTop"),this.headerTapNumber=0):setTimeout((()=>{this.headerTapNumber=0}),1e3)},getRefs:function(e,t,o){if(t>=50)return o(this.$refs[e]),!1;var s=this.$refs[e];s?o(s):(t++,setTimeout((()=>{this.getRefs(e,t,o)}),100))},loadmorefun:function(){return!!this.loadmore&&(!this.apiLoadingStatus&&(null!=this.loadMoreTimer&&clearTimeout(this.loadMoreTimer),void(this.loadMoreTimer=setTimeout((()=>{if(0!=this.$refs.guipageloadmore.loadMoreStatus)return null;this.$refs.guipageloadmore.loading(),this.$emit("loadmorefun")}),80))))},stopLoadmore:function(){this.$refs.guipageloadmore.stoploadmore()},stoploadmore:function(){this.$refs.guipageloadmore.stoploadmore()},nomore:function(){this.$refs.guipageloadmore.nomore()},empty:function(){this.$refs.guipageloadmore.empty()},toast:function(e){y({title:e,icon:"none"})},resetFooterHeight:function(){this.customFooter&&setTimeout((()=>{this.getDomSize("guiPageFooter",(e=>{this.footerHeight=e.height}),0)}),500)},isIphoneBottom:function(){var e=f();if(e.model){e.model=e.model.replace(" ",""),e.model=e.model.toLowerCase();var t=e.model.indexOf("iphonex");t>5&&(t=-1);var o=e.model.indexOf("iphone1");if(o>5&&(o=-1),-1!=t||-1!=o)return!0}return!1}},emits:["scroll","reload","loadmorefun","gotoTop"]},[["render",function(e,n,l,g,f,p){const m=h,y=F(S("gui-refresh"),C),x=F(S("gui-loadmore"),z),M=T,$=F(S("gui-iphone-bottom"),v),P=F(S("gui-page-loading"),H);return t(),o(m,{style:r({opacity:f.pageStatus?1:0}),class:a(["gui-sbody gui-flex gui-column",[l.fullPage||l.refresh||l.loadmore?"gui-flex1":""]])},{default:s((()=>[l.customHeader?(t(),o(m,{key:0,class:a(["gui-header gui-transition-all",l.headerClass]),id:"guiPageHeader",ref:"guiPageHeader"},{default:s((()=>[i(m,{class:a(["gui-page-status-bar",l.statusBarClass]),style:r({height:f.statusBarHeight+"px"})},{default:s((()=>[c(e.$slots,"gStatusBar")])),_:3},8,["class","style"]),i(m,{class:"gui-flex gui-column gui-justify-content-center",onClick:d(p.headerTap,["stop"])},{default:s((()=>[c(e.$slots,"gHeader")])),_:3},8,["onClick"])])),_:3},8,["class"])):u("",!0),l.customHeader&&l.isHeaderSized?(t(),o(m,{key:1,style:r({height:f.headerHeight+"px"})},null,8,["style"])):u("",!0),l.refresh||l.loadmore?u("",!0):(t(),o(m,{key:2,class:a(["gui-flex gui-column gui-relative",[l.fullPage?"gui-flex1":""]]),id:"guiPageBody",ref:"guiPageBody"},{default:s((()=>[c(e.$slots,"gBody")])),_:3},8,["class"])),l.refresh||l.loadmore?(t(),o(m,{key:3,class:"gui-flex1 gui-relative",id:"guiPageBody",ref:"guiPageBody",style:r({marginTop:f.fixedTopMargin+"px"})},{default:s((()=>[i(M,{class:"gui-absolute-full","scroll-y":!0,"show-scrollbar":!1,onTouchstart:p.touchstart,onTouchmove:p.touchmove,onTouchend:p.touchend,onScroll:p.scroll,"scroll-into-view":f.topTagID,"scroll-with-animation":!1,onScrolltolower:p.loadmorefun},{default:s((()=>[i(m,{id:"guiPageBodyTopTag"},{default:s((()=>[i(y,{ref:"guiPageRefresh",onReload:p.reload,refreshText:l.refreshText,customClass:l.refreshClasses,triggerHeight:l.reFreshTriggerHeight,refreshFontSize:l.refreshFontSize},null,8,["onReload","refreshText","customClass","triggerHeight","refreshFontSize"])])),_:1}),c(e.$slots,"gBody"),l.loadmore?(t(),o(m,{key:0},{default:s((()=>[i(x,{ref:"guipageloadmore",status:l.loadMoreStatus,loadMoreText:l.loadMoreText,customClass:l.loadMoreClass,loadMoreFontSize:l.loadMoreFontSize},null,8,["status","loadMoreText","customClass","loadMoreFontSize"])])),_:1})):u("",!0)])),_:3},8,["onTouchstart","onTouchmove","onTouchend","onScroll","scroll-into-view","onScrolltolower"])])),_:3},8,["style"])):u("",!0),l.customFooter?(t(),o(m,{key:4,style:r({height:f.footerHeight+"px"})},null,8,["style"])):u("",!0),l.customFooter?(t(),o(m,{key:5,class:a(["gui-page-footer gui-border-box",l.footerClass]),id:"guiPageFooter",ref:"guiPageFooter"},{default:s((()=>[c(e.$slots,"gFooter"),i($,{need:!l.isSwitchPage,customClass:l.footerSpaceClass},null,8,["need","customClass"])])),_:3},8,["class"])):u("",!0),i(m,{class:a(["gui-page-pendant",l.pendantClass])},{default:s((()=>[c(e.$slots,"gPendant")])),_:3},8,["class"]),i(m,{class:"gui-page-fixed-top",ref:"guiPageFixedTop",id:"guiPageFixedTop",style:r({top:f.fixedTop+"px"})},{default:s((()=>[c(e.$slots,"gFixedTop")])),_:3},8,["style"]),i(P,{ref:"guipageloading"},null,512)])),_:3},8,["style","class"])}]]);export{x as _,M as a,F as r};
